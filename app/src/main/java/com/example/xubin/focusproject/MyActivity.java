package com.example.xubin.focusproject;import android.app.Activity;import android.os.Bundle;import android.view.KeyEvent;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.view.View.OnFocusChangeListener;import android.widget.EditText;import android.widget.ImageView;import android.widget.TextView;import android.view.View.OnKeyListener;public class MyActivity extends Activity {    private EditText edit=null;    private TextView txt=null;    private ImageView img=null;    private TextView t=null;    private EditText inp=null;    private ImageView im=null;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_my);        this.edit=(EditText)super.findViewById(R.id.edit);        this.txt=(TextView)super.findViewById(R.id.txt);        this.edit.setOnClickListener(new OnClickListenerImp());        this.edit.setOnFocusChangeListener(new OnFocusChangeListenerImp());        this.t=(TextView)super.findViewById(R.id.t);        this.img=(ImageView)super.findViewById(R.id.img);        this.img.setOnLongClickListener(new OnLongClickListenerImp());        //键盘事件        this.inp=(EditText)super.findViewById(R.id.inp);        this.im=(ImageView)super.findViewById(R.id.im);        this.inp.setOnKeyListener(new OnKeyListenerImp());    }    private class OnKeyListenerImp implements OnKeyListener{        public boolean onKey(View v,int keyCode,KeyEvent event){            switch (event.getAction()){                case KeyEvent.ACTION_UP:                    String msg=MyActivity.this.inp.getText().toString();                    if(msg.matches("^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/")){                        MyActivity.this.im.setImageResource(R.drawable.ic_launcher);                    }else{                        MyActivity.this.inp.setText("错误");                    }            }            return false;        }    }    private class OnClickListenerImp implements View.OnClickListener{        public void onClick(View v){            MyActivity.this.edit.setText("");        }    }    private class OnFocusChangeListenerImp implements OnFocusChangeListener{        public void onFocusChange(View v,boolean hasFocus){            if(hasFocus){                MyActivity.this.txt.setText("文本输入组件获得焦点");            }else{                if(MyActivity.this.edit.getText().length()>0){                    MyActivity.this.txt.setText("文本输入组件失去焦点,内容有");                }else{                    MyActivity.this.txt.setText("文本输入组件失去焦点,内容为空");                }            }        }    }    private class OnLongClickListenerImp implements View.OnLongClickListener{        public boolean onLongClick(View v){            try {                MyActivity.this.clearWallpaper();                MyActivity.this.setWallpaper(MyActivity.this.img.getResources().openRawResource(R.drawable.ic_launcher));                MyActivity.this.t.setText("手机桌面设置成功");            }catch (Exception e){                MyActivity.this.t.setText("手机桌面设置失败");            }            return false;        }    }    @Override    public boolean onCreateOptionsMenu(Menu menu) {        // Inflate the menu; this adds items to the action bar if it is present.        getMenuInflater().inflate(R.menu.my, menu);        return true;    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        int id = item.getItemId();        if (id == R.id.action_settings) {            return true;        }        return super.onOptionsItemSelected(item);    }}